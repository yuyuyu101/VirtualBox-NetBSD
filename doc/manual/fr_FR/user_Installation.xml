<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<chapter id="installation">
  <title>Détails d'installation</title>

  <para>Étant donné que l'installation de VirtualBox varie selon votre système 
  d'exploitation hôte, nous fournissons des instructions d'installation dans 
  quatre chapitres distincts, respectivement pour Windows, Mac OS X, Linux et 
  Solaris.</para>

  <sect1 id="installation_windows">
    <title>Installation sur des hôtes Windows</title>

    <sect2>
      <title>Prérequis</title>

      <para>Pour les différentes versions de Windows que nous supportons comme 
      systèmes d'exploitation hôtes, merci de vous référer au <xref
      linkend="hostossupport" />.</para>

      <para>En outre, l'installateur de Windows 1.1 ou supérieur doit être 
      présent sur votre système. Cela devrait être le cas si vous avez installé
      toutes les dernières mises à jour.</para>
    </sect2>

    <sect2>
      <title>Effectuer l'installation</title>

      <para>Vous pouvez démarrer l'installation de VirtualBox <itemizedlist>
          <listitem>
            <para>soit en double-cliquant sur son fichier exécutable (contenant
            les architectures 32 bits et 64 bits)</para>
          </listitem>

          <listitem>
            <para>ou en entrant <screen>VirtualBox.exe -extract</screen></para>

            <para>sur la ligne de commande. Ceci va extraire les deux 
            installateurs dans un répertoire temporaire dans lequel vous trouverez
            ensuite les fichiers .MSI habituels. Puis, vous pouvez faire un 
            <screen>msiexec /i VirtualBox-&lt;version&gt;-MultiArch_&lt;x86|amd64&gt;.msi</screen>
            pour effectuer l'installation.</para>
          </listitem>
        </itemizedlist></para>

      <para>Dans tous les cas, ceci affichera la boîte de dialogue de bienvenue
      de l'installation et vous permettra de choisir où installer VirtualBox et
      quels composants installer. Outre l'application VirtualBox, les composants
      suivants sont disponibles&nbsp;:<glosslist>
          <glossentry>
            <glossterm>Support USB</glossterm>

            <glossdef>
              <para>Ce paquet contient des pilotes spéciaux pour votre hôte 
              Windows dont VirtualBox a besoin pour supporter complètement les 
              périphériques USB à l'intérieur de vos machines virtuelles.</para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>Réseau</glossterm>

            <glossdef>
              <para>Ce paquet contient des pilotes supplémentaires de réseau pour
              votre hôte Windows dont VirtualBox a besoin pour supporter Host 
              Interface Networking  (réseau interface hôte) (pour rendre les 
              cartes réseau virtuelles accessibles depuis les autres machines 
              de votre réseau physique).</para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>Support Python</glossterm>

            <glossdef>
              <para>Ce paquet contient le support de scripts Python pour l'API 
              de VirtualBox (voir le chapitre <xref linkend="VirtualBoxAPI" />).
              Pour que cette fonctionnalité soit installée, une installation de
              Python opérationnelle sur le système est nécessaire.</para>
            </glossdef>
          </glossentry>
        </glosslist></para>

      <para>En fonction de votre configuration de Windows, il se peut que vous 
      voyez des avertissements sur des <quote>pilotes non signés</quote> ou 
      quelque chose de ce genre. Merci de sélectionner <quote>Continuer</quote>
      sur ces avertissements car sans cela, VirtualBox pourrait ne pas fonctionner
      correctement après l'installation.</para>

      <para>L'installateur va créer le groupe <quote>VirtualBox</quote> dans le
      répertoire Démarrer Les programmes qui vous permet de lancer l'application
      et d'accéder à sa documentation.</para>

      <para>Avec des paramètres standards, VirtualBox sera installé pour tous
      les utilisateurs du système local. Au cas où vous ne le voulez pas, vous 
      devez invoquer l'installateur en l'extrayant d'abord en utilisant
      <screen>VirtualBox.exe -extract</screen> puis faites comme suit&nbsp;:
      <screen>VirtualBox.exe -msiparams ALLUSERS=2</screen>
      ou <screen>msiexec /i VirtualBox-&lt;version&gt;-MultiArch_&lt;x86|amd64&gt;.msi ALLUSERS=2</screen>
      sur les fichiers .MSI extraits. Ceci ne va installer VirtualBox que pour 
      l'utilisateur actuel.</para>

      <para>Pour ne pas installer certaines fonctionnalités de VirtualBox, vous
      pouvez spécifier aussi un paramètre <computeroutput>ADDLOCAL</computeroutput>
      pour nommer explicitement les fonctionnalités à installer. Les 
      fonctionnalités suivantes sont disponibles&nbsp;:

        <glosslist>
          <glossentry>
            <glossterm>VBoxApplication</glossterm>

            <glossdef>
              <para>Binaires principaux de VirtualBox.
                <note>Cette fonctionnalité ne peut jamais être absente puisqu'elle
                contient l'ensemble de fichiers minimum pour que l'installation
                de VirtualBox fonctionne&nbsp;!</note>
              </para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>VBoxUSB</glossterm>

            <glossdef>
              <para>Support USB.</para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>VBoxNetwork</glossterm>

            <glossdef>
              <para>Tout le support réseau&nbsp;; inclut les fonctionnalités 
              VBoxNetworkFlt et VBoxNetworkAdp (voir ci-dessous).</para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>VBoxNetworkFlt</glossterm>

            <glossdef>
              <para>Support réseau bridgé.</para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>VBoxNetworkAdp</glossterm>

            <glossdef>
              <para>Support réseau Host-only.</para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>VBoxPython</glossterm>

            <glossdef>
              <para>Support Python.</para>
            </glossdef>
          </glossentry>
        </glosslist>

      Pour n'installer que le support USB avec les binaires principaux, faites 
      un&nbsp;: <screen>VirtualBox.exe -msiparams ADDLOCAL=VBoxApplication,VBoxUSB</screen>
      ou un <screen>msiexec /i VirtualBox-&lt;version&gt;-MultiArch_&lt;x86|amd64&gt;.msi ADDLOCAL=VBoxApplication,VBoxUSB</screen></para>

    </sect2>

    <sect2>
      <title>Désinstallation</title>

      <para>Comme nous utilisons l'installateur Windows, vous pouvez désinstaller
      VirtualBox en sécurité n'importe quand en choisissant l'entrée du programme
      dans la fonction <quote>Ajout/suppression de programmes</quote> dans le 
      panneau de configuration Windows.</para>
    </sect2>

    <sect2>
      <title>Installation sans efforts</title>

      <para>Vous pouvez faire des installations sans effort en utilisant le 
      support MSI standard.</para>
    </sect2>
  </sect1>

  <sect1>
    <title>Installation sur des hôtes Mac OS X</title>

    <sect2>
      <title>Effectuer l'installation</title>

      <para>Pour les hôtes Mac OS X, VirtualBox est emballé dans une fichier 
      image de disque (dmg). Effectuez les étapes suivantes&nbsp;: <orderedlist>
          <listitem>
            <para>Double-cliquez sur ce fichier pour monter son contenu.</para>
          </listitem>

          <listitem>
            <para>Une fenêtre va s'ouvrir vous disant de double-cliquer sur le 
            fichier installateur <computeroutput>VirtualBox.mpkg</computeroutput>
            affiché dans la fenêtre.</para>
          </listitem>

          <listitem>
            <para>Ceci démarrera l'installateur, ce qui vous permettra de 
            sélectionner où installer VirtualBox.</para>
          </listitem>
        </orderedlist></para>

      <para>Après l'installation, vous pouvez trouver une icône VirtualBox dans
      le menu <quote>Applications</quote> dans le <quote>Finder</quote>.</para>
    </sect2>

    <sect2>
      <title>Désinstallation</title>

      <para>Pour désinstaller VirtualBox, ouvrez à nouveau le fichier image (dmg)
      et double-cliquez sur l'icône Désinstaller contenue dedans.</para>
    </sect2>

    <sect2>
      <title>Installation sans efforts</title>

      <para>Pour effectuer une installation non interactive de VirtualBox, vous
      pouvez utiliser la version en ligne de commande de l'application 
      installateur.</para>

      <para>Montez le fichier image de disque (dmg) comme décrit dans 
      l'installation normale. Puis, ouvrez une session de terminal et exécutez&nbsp;:</para>

      <screen>sudo installer -pkg /Volumes/VirtualBox/VirtualBox.mpkg \
      -target /Volumes/Macintosh\ HD</screen>
    </sect2>
  </sect1>

  <sect1>
    <title id="install-linux-host">Installation sur des hôtes Linux</title>

    <sect2>
      <title>Prérequis</title>

      <para>Pour les diverses versions de Linux que nous supportons en tant que
      systèmes d'exploitation hôtes, merci de vous référer au <xref
      linkend="hostossupport" />.</para>

      <para>Vous aurez besoin d'installer les paquets suivants sur votre système
      Linux avant de commencer l'installation (certains systèmes feront cela 
      pour vous automatiquement quand vous installerez VirtualBox)&nbsp;:</para>

      <itemizedlist>
        <listitem>
          <para>Qt 4.4.0 ou supérieur&nbsp;;</para>
        </listitem>

        <listitem>
          <para>SDL 1.2.7 ou supérieur (cette bibliothèque graphique est en 
          général appelée <computeroutput>libsdl</computeroutput>
          ou quelque chose du genre).</para>
        </listitem>
      </itemizedlist>

      <note>
        <para>Pour être précis, ces paquets ne sont nécessaires que si vous 
        voulez lancer les interfaces graphiques de VirtualBox. En particulier, 
        <computeroutput>VirtualBox</computeroutput>, notre interface graphique 
        principale, exige à la fois Qt et SDL&nbsp;; <computeroutput>VBoxSDL</computeroutput>, 
        notre interface graphique simplifiée, n'exige que SDL. À l'inverse, si 
        vous ne voulez qu'exécuter le serveur VRDP headless fourni avec VirtualBox,
        ni Qt ni SDL ne sont nécessaires.</para>
      </note>
    </sect2>

    <sect2 id="externalkernelmodules">
      <title>Le module noyau de VirtualBox</title>

      <para>VirtualBox utilise un module noyau spécial pour effectuer 
      l'allocation de la mémoire physique et pour obtenir le contrôle du 
      processeur pour l'exécution du système invité. Sans ce module noyau, vous
      pourrez travailler avec des machines virtuelles dans l'interface de 
      configuration mais vous ne pourrez lancer aucune machine virtuelle.</para>

      <para>Le module noyau de VirtualBox est automatiquement installé sur votre
      système quand vous installez VirtualBox. Pour le maintenir avec les futures
      mises à jour du noyau, pour les distributions Linux qui le fournissent --
      la plupart des distributions actuelles --, nous recommandons d'installer
      le Dynamic Kernel Module Support (DKMS) (support de module noyau dynamique)<footnote>
          <para>Voir <ulink
          url="http://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support">http://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support</ulink>
          pour une introduction.</para>
        </footnote>. Cet environnement aide à construire des modules de noyau et 
        à gérer  les mises à jour du noyau.</para>

      <para>Si DKMS n'est pas déjà installé, exécutez une des étapes suivantes&nbsp;:
      <itemizedlist>
          <listitem>
            <para>Sur un système Ubuntu&nbsp;:</para>

            <screen>sudo apt-get install dkms</screen>
          </listitem>

          <listitem>
            <para>Sur un système Fedora&nbsp;:<screen>yum install dkms</screen></para>
          </listitem>

          <listitem>
            <para>Sur un système Mandriva ou Mageia&nbsp;:<screen>urpmi dkms</screen></para>
          </listitem>
        </itemizedlist></para>

      <para>Si DKMS est disponible et installé, le module noyau de VirtualBox 
      devrait toujours fonctionner automatiquement et il sera automatiquement 
      reconstruit si votre noyau hôte est mis à jour.</para>

      <para>Sinon, il n'y a que deux situations où vous devrez vous inquiéter du
      module noyau&nbsp;:<orderedlist>
          <listitem>
            <para>L'installation échoue dès le départ. Cela signifie probablement
            que votre système Linux n'est pas préparé à construire des modules 
            noyau externes.</para>

            <para>La plupart des distributions Linux peuvent être paramétrées 
            simplement en installant les bons paquets -- normalement il s'agira
            du compilateur GNU (GCC), GNU Make (make) et des paquets contenant 
            les fichiers d'en-tête de votre noyau - et en vous assurant que toutes 
            les mises à jour du système sont installées et que le système 
            exécute le noyau le plus récent inclus dans la distribution.
            <emphasis>Les numéros de version des paquets de fichiers d'en-tête 
            doivent  être les mêmes que ceux du noyau que vous utilisez.</emphasis></para>

            <itemizedlist>
              <listitem>
                <para>Avec les versions de Debian et d'Ubuntu, vous devez 
                installer la bonne version de <computeroutput>linux-headers</computeroutput> 
                et, s'il existe, du paquet <computeroutput>linux-kbuild</computeroutput>.
                Les versions actuelles d'Ubuntu devraient avoir les bons paquets
                installés par défaut.</para>
              </listitem>

              <listitem>
                <para>Dans des versions de Debian et d'Ubuntu encore plus 
                anciennes, vous devez installer la bonne version du paquet 
                <computeroutput>kernel-headers</computeroutput>.</para>
              </listitem>

              <listitem>
                <para>Sur les systèmes Fedora et Redhat, le paquet s'appelle 
                <computeroutput>kernel-devel</computeroutput>.</para>
              </listitem>

              <listitem>
                <para>Sur SUSE et openSUSE Linux, vous devez installer la bonne
                version des paquets <computeroutput>kernel-source</computeroutput>
                et <computeroutput>kernel-syms</computeroutput>.</para>
              </listitem>

              <listitem>
                <para>Sinon, si vous avez construit votre propre noyau, 
                <computeroutput>/usr/src/linux</computeroutput> devrait pointer
                vers les sources de votre noyau. Si vous n'avez pas supprimé les
                fichiers créés pendant le processus de construction, alors votre
                système sera déjà paramétré correctement.</para>
              </listitem>
            </itemizedlist>
          </listitem>

          <listitem>
            <para>Le noyau de votre hôte Linux a été mis à jour. Dans ce cas le
            module noyau aura besoin d'être réinstallé en exécutant (en tant 
            qu'administrateur)&nbsp;:</para>

            <screen>/etc/init.d/vboxdrv setup</screen>
          </listitem>
        </orderedlist></para>
    </sect2>

    <sect2>
      <title>Support de l'USB et du réseau avancé</title>

      <para>Afin d'utiliser le support USB de VirtualBox, le compte utilisateur
      sous lequel vous entendez lancer VirtualBox doit avoir l'accès en lecture
      et en écriture au système de fichiers USB (<computeroutput>usbfs</computeroutput>).</para>

      <para>En outre, l'accès à
      <computeroutput>/dev/net/tun</computeroutput> sera requis si vous voulez 
      utiliser le Host Interface Networking (réseau d'interface hôte), ce qui 
      est décrit en détail au <xref linkend="network_bridged" />.</para>

      <!--TODO Write a couple of notes about hardened kernels. If PaX is installed, VBox presently doesn't start. I tried with a
gentoo hardened kernel that had PaX enabled, and VBoxHeadless failed with really funny VERR_NO_MEMORY messages. Discussing
it with Knut revealed that PaX might be the problem, and running paxctl to disable these protections actually
helped. For reference:
First run paxctl -C VBoxVDRP to have the executable modified to support PaX flags in the first place.
Then paxctl -pemrxs VBoxHeadless to disable all protections. TODO: Figure out which ones are really needed.-->
    </sect2>

    <sect2>
      <title>Effectuer l'installation</title>

      <para>VirtualBox est disponible dans un grand nombre de formats de paquets
      de base pour de nombreuses distributions Linux (voir le 
      <xref linkend="hostossupport" /> pour les détails). En outre, il y a un 
      installateur générique alternatif (.run)  qui devrait fonctionner sur la 
      plupart des distributions Linux.</para>

      <sect3>
        <title>Installer VirtualBox à partir d'un paquet Debian/Ubuntu</title>

        <para>Tout d'abord, téléchargez le paquet adapté à votre distribution. 
        Les exemples suivants supposent que vous installez sur un système 32 
        bits Ubuntu Karmic. Utilisez <computeroutput>dpkg</computeroutput> pour
        installer le paquet Debian&nbsp;:</para>

        <screen>sudo dpkg -i VirtualBox-3.2_$VBOX_VERSION_STRING_Ubuntu_karmic_i386.deb</screen>

        <para>On vous demandera d'accepter la licence VirtualBox Personal Use
        and Evaluation License (licence d'évaluation et d'utilisation 
        personnelle de VirtualBox). Sauf si vous répondez <quote>Yes</quote> ici, 
        l'installation sera arrêtée.</para>

        <para>Le groupe <computeroutput>vboxusers</computeroutput> sera créé 
        pendant l'installation. Notez qu'un utilisateur qui va exécuter 
        VirtualBox doit être membre de ce groupe. Un utilisateur peut devenir 
        membre du groupe <computeroutput>vboxusers</computeroutput> à travers la 
        gestion des utilisateurs/groupes en graphique ou en ligne de commande 
        avec</para>

        <screen>sudo usermod -a -G vboxusers nom_utilisateur</screen>

        <para>Remarquez aussi qu'ajouter un utilisateur actif à ce groupe 
        exigera que l'utilisateur se déconnecte puis revienne. Cela devrait se 
        faire à la main après une installation réussie du paquet.</para>

        <para>L'installateur cherchera aussi un module noyau VirtualBox qui 
        convient à votre noyau. Le paquet comprend des modules précompilés pour
        la plupart des configurations du noyau. Si aucun module noyau convenable 
        n'est trouvé, le script d'installation essaie de construire un module 
        lui-même. Si le processus de construction ne réussit pas, on vous montrera 
        un avertissement et le paquet sera laissé non configuré. Merci de jeter
        un &oelig;il sur <computeroutput>/var/log/vbox-install.log</computeroutput> 
        pour trouver pourquoi la compilation a échoué. Il se peut que vous deviez
        installer les en-têtes du noyau Linux adéquat (voir le <xref
                linkend="externalkernelmodules" />). Après avoir corrigé les 
                problèmes, faites

        <screen>sudo /etc/init.d/vboxdrv setup</screen>Ceci démarrera une 
        nouvelle tentative de construire le module.</para>

        <para>Si un module noyau convenable est trouvé dans le paquet ou si le 
        module a été construit avec succès, le script d'installation va tenter 
        de charger le module. Si ceci échoue, merci de voir le chapitre <xref 
        linkend="linuxkernelmodulefailstoload" /> pour de plus amples informations.</para>

        <para>Une fois que VirtualBox a été installé avec succès et configuré, 
        vous pouvez le démarrer en sélectionnant <quote>VirtualBox</quote> dans
        votre menu de démarrage ou depuis la ligne de commande (voir le 
        <xref linkend="startingvboxonlinux" />).</para>
      </sect3>

      <sect3>
        <title>Utiliser l'installateur alternatif (VirtualBox.run)</title>

        <para>L'installateur alternatif effectue les étapes suivantes&nbsp;:</para>

        <itemizedlist>
          <listitem>
            <para>Il déballe les fichiers de l'application vers un répertoire 
            cible de votre choix. Par défaut, <screen>/opt/VirtualBox/</screen>
            sera utilisé.</para>
          </listitem>

          <listitem>
            <para>Il construit le module noyau VirtualBox
            (<computeroutput>vboxdrv</computeroutput>) et l'installe.</para>
          </listitem>

          <listitem>
            <para>Il crée
            <computeroutput>/etc/init.d/vboxdrv</computeroutput>, un script de 
            démarrage pour démarrer le module noyau de VirtualBox.</para>
          </listitem>

          <listitem>
            <para>Il crée un nouveau groupe système appelé
            <computeroutput>vboxusers</computeroutput>.</para>
          </listitem>

          <listitem>
            <para>Il crée des liens symboliques vers
            <computeroutput>VirtualBox</computeroutput>,
            <computeroutput>VBoxSDL</computeroutput>,
            <computeroutput>VBoxVRDP</computeroutput>,
            <computeroutput>VBoxHeadless</computeroutput> et
            <computeroutput>VBoxManage</computeroutput> dans
            <computeroutput>/usr/bin</computeroutput>.</para>
          </listitem>

          <listitem>
            <para>Il crée
            <computeroutput>/etc/udev/60-vboxdrv.rules</computeroutput>, un 
            fichier de description pour udev, s'il est présent ce qui rend le 
            module accessible à n'importe qui dans le groupe
            <computeroutput>vboxusers</computeroutput>.</para>
          </listitem>

          <listitem>
            <para>Il écrit le répertoire d'installation dans 
            <computeroutput>/etc/vbox/vbox.cfg</computeroutput>.</para>
          </listitem>
        </itemizedlist>

        <para>L'installateur doit être exécuté en tant qu'administrateur avec 
        <computeroutput>install</computeroutput> ou <computeroutput>uninstall</computeroutput> 
        en premier paramètre. Si vous ne voulez pas que l'installateur vous 
        demande si vous acceptez ou non l'accord de licence (par exemple pour 
        effectuer une installation sans efforts), vous pouvez ajouter le 
        paramètre <computeroutput>license_accepted_unconditionally</computeroutput>.
        Enfin, si vous voulez utiliser un autre répertoire que celui 
        d'installation par défaut, ajoutez le chemin désiré en paramètre 
        supplémentaire.</para>

        <screen>sudo ./VirtualBox.run install /opt/VirtualBox</screen>

        <para>Ou si vous n'avez pas de commande <quote>sudo</quote> disponible, 
        lancez plutôt ce qui suit en tant
        qu'administrateur&nbsp;:<screen>./VirtualBox.run install /opt/VirtualBox</screen></para>

        <para>Après quoi vous devez mettre tout utilisateur qui devrait pouvoir
        utiliser  VirtualBox dans le groupe <computeroutput>vboxusers</computeroutput>,
        soit avec les outils graphiques de gestion d'utilisateur soit en 
        lançant la commande suivante en tant qu'administrateur&nbsp;:</para>

        <screen>sudo usermod -a -G vboxusers username</screen>

        <para><note>
            <para>La commande <computeroutput>usermod</computeroutput> de
            certaines distributions Linux anciennes ne supporte pas l'option 
            <computeroutput>-a</computeroutput> (qui ajoute l'utilisateur au 
            groupe donné sans modifier sa qualité de membre d'autres groupes). 
            Dans ce cas, cherchez les appartenances de groupe avec la commande 
            <computeroutput>groups</computeroutput> et ajoutez tous ces groupes
            dans une liste séparée par des virgules à la ligne de commande après
            l'option <computeroutput>-G</computeroutput>, comme ceci par 
            exemple&nbsp;:
            <computeroutput>usermod -G group1,group2,vboxusers
            nom_utilisateur</computeroutput>.</para>
          </note>Si un utilisateur sur votre système devrait pouvoir accéder 
          aux périphériques USB de l'hôte, depuis vos invités VirtualBox, vous 
          devriez aussi les ajouter au groupe utilisateur utilisé par votre 
          distribution pour l'accès USB (comme <computeroutput>usb</computeroutput> 
          ou <computeroutput>usbusers</computeroutput>.</para>
      </sect3>

      <sect3>
        <title>Effectuer une installation manuelle</title>

        <para>Si pour une raison quelconque vous ne pouvez pas utiliser le 
        script shell d'installation décrit précédemment, vous pouvez aussi 
        effectuer une installation manuelle. Invoquez l'installateur comme ceci&nbsp;:</para>

        <screen>./VirtualBox.run --keep --noexec</screen>

        <para>Cela va déballer tous les fichiers nécessaires à l'installation 
        dans le répertoire <computeroutput>install</computeroutput> sous le 
        répertoire cohérent. Les fichiers de l'application  VirtualBox sont 
        contenus dans <computeroutput>VirtualBox.tar.bz2</computeroutput> que 
        vous pouvez déballer dans n'importe quel répertoire sur votre système. 
        Par exemple&nbsp;:</para>

        <screen>sudo mkdir /opt/VirtualBox
sudo tar jxf ./install/VirtualBox.tar.bz2 -C /opt/VirtualBox</screen>

        <para>ou en tant qu'administrateur&nbsp;:<screen>mkdir /opt/VirtualBox
tar jxf ./install/VirtualBox.tar.bz2 -C /opt/VirtualBox</screen></para>

        <para>Les sources du module noyau de VirtualBox sont fournies dans le 
        répertoire <computeroutput>src</computeroutput>. Pour construire le 
        module, allez dans ce répertoire et exécutez</para>

        <screen>make</screen>

        <para>Si tout se construit correctement, exécutez la commande suivante 
        pour installer le module dans le répertoire de modules aqéquats&nbsp;:</para>

        <screen>sudo make install</screen>

        <para>Au cas où vous n'avez pas sudo, allez du compte utilisateur vers 
        celui administrateur  et effectuez<screen>make install</screen></para>

        <para>Le module noyau de VirtualBox a besoin d'un n&oelig;ud de 
        périphérique pour fonctionner. La commande make ci-dessus vous dira 
        comment créer le n&oelig;ud de périphérique en fonction de votre système
        Linux. La procédure est légèrement différente pour une installation 
        Linux classique avec un répertoire <computeroutput>/dev</computeroutput>, 
        un système avec un répertoire <computeroutput>devfs</computeroutput>, 
        maintenant obsolète, et un système Linux moderne avec
        <computeroutput>udev</computeroutput>.</para>

        <para>Sur certaines distributions Linux, vous pourriez rencontrer des 
        difficultés pour construire le module. Vous devrez analyser les messages 
        d'erreur du système de construction pour diagnostiquer la cause des 
        problèmes. De façon générale, assurez-vous d'utiliser les bonnes sources
        du noyau Linux pour le  processus de construction.</para>

        <para>Remarquez que l'utilisateur qui va lancer VirtualBox a besoin des
        droits de lecture et d'écriture sur le n&oelig;ud de périphérique du 
        module noyau <computeroutput>/dev/vboxdrv</computeroutput>. Vous pouvez
        soit définir un groupe <computeroutput>vboxusers</computeroutput> en 
        entrant <screen>groupadd vboxusers
chgrp vboxusers /dev/vboxdrv
chmod 660 /dev/vboxdrv</screen>soit, alternativement, simplement donner à tous 
les utilisateurs l'accès (non sécurisé, non recommandé&nbsp;!)<screen>chmod 666 /dev/vboxdrv</screen>Vous
        devriez aussi ajouter les utilisateurs qui seront autorisés à utiliser 
        les périphériques USB de l'hôte des invités de VirtualBox au groupe 
        d'utilisateurs USB adéquat pour votre distribution. Ce groupe  s'appelle
        souvent <computeroutput>usb</computeroutput> ou
        <computeroutput>usbusers</computeroutput>.</para>

        <para>Ensuite, vous devrez installer le script de démarrage système du 
        module noyau&nbsp;:<screen>cp /opt/VirtualBox/vboxdrv.sh /etc/init.d/vboxdrv</screen>(en
        supposant que vous avez installé VirtualBox dans le répertoire 
        <computeroutput>/opt/VirtualBox</computeroutput>) et activer le script 
        de démarrage en utilisant la méthode adaptée à votre distribution. Vous
        devriez créer le fichier de configuration de VirtualBox&nbsp;:<screen>mkdir /etc/vbox
echo INSTALL_DIR=/opt/VirtualBox &gt; /etc/vbox/vbox.cfg</screen>et, par souci 
de pratique, créer les liens symboliques suivants&nbsp;:</para>

        <screen>ln -sf /opt/VirtualBox/VBox.sh /usr/bin/VirtualBox
ln -sf /opt/VirtualBox/VBox.sh /usr/bin/VBoxSVC
ln -sf /opt/VirtualBox/VBox.sh /usr/bin/VBoxManage
ln -sf /opt/VirtualBox/VBox.sh /usr/bin/VBoxHeadless
ln -sf /opt/VirtualBox/VBox.sh /usr/bin/VBoxSDL</screen>
      </sect3>

      <sect3>
        <title>Mettre à jour et désinstaller VirtualBox</title>

        <para>Avant de mettre à jour ou de désinstaller VirtualBox, vous devez 
        arrêter toutes les machines virtuelles qui sont actuellement en fonction
        et quitter les applications VirtualBox ou VboxSVC. Pour mettre à jour 
        VirtualBox, lancez simplement l'installateur de la version de mise à 
        jour. Pour désinstaller VirtualBox, appelez l'installateur comme 
        ceci&nbsp;: <screen>sudo ./VirtualBox.run uninstall</screen>
        ou en tant qu'administrateur<screen>./VirtualBox.run uninstall</screen>. 
        À partir de la version 2.2.2, vous pouvez désinstaller le paquet .run 
        en appelant <screen>/opt/VirtualBox/uninstall.sh</screen>Pour
        désinstaller VirtualBox à la main, effectuez simplement les étapes 
        d'installation manuelle dans l'ordre inverse.</para>
      </sect3>

      <sect3>
        <title>Installation automatique des paquets Debian</title>

        <para>Les paquets Debian exigeront quelques retours d'utilisateurs 
        lorsqu'ils seront installés pour la première fois.  Le système debconf 
        est utilisé pour effectuer cette tâche. Pour éviter toute action de 
        l'utilisateur pendant l'installation, vous pouvez définir des valeurs 
        par défaut. Un fichier <computeroutput>vboxconf</computeroutput> peut 
        contenir les réglages debconf suivants&nbsp;: <screen>virtualbox virtualbox/module-compilation-allowed boolean true
virtualbox virtualbox/delete-old-modules boolean true</screen>La première ligne
        permet de compiler le module noyau  vboxdrv si aucun module n'a été 
        trouvé pour le noyau actuel. La deuxième ligne permet au paquet 
        d'effacer n'importe quel ancien module noyau  vboxdrv compilé par les 
        installations précédentes.</para>

        <para>Ces réglages par défaut peuvent être appliqués avec <screen>debconf-set-selections vboxconf</screen>
        avant l'installation du paquet Debian VirtualBox.</para>

        <para>Il y a au surplus des options de configuration courantes que vous
        pouvez régler avant l'installation, décrites au <xref linkend="linux_install_opts" />.</para>
      </sect3>

      <sect3>
        <title>Installation automatique de paquets .rpm</title>

        <para>Le format .rpm n'offre pas de système de configuration comparable
        au système debconf. Voir le <xref linkend="linux_install_opts" /> pour 
        savoir comment régler des options d'installation courantes fournies par
        VirtualBox.</para>
      </sect3>

      <sect3>
        <title id="linux_install_opts">Options d'installation automatique</title>
        <para>Pour configurer le processus d'installation de nos paquets .rpm et
        .deb, un fichier <computeroutput>/etc/default/virtualbox</computeroutput> 
        est interprété. La génération automatique de la règle udev peut être 
        empêcher avec le paramétrage suivant&nbsp;:
        <screen>INSTALL_NO_UDEV=1</screen> La création du groupe vboxusers peut
        être empêchée par <screen>INSTALL_NO_GROUP=1</screen> Si la ligne 

        <screen>INSTALL_NO_VBOXDRV=1</screen> est spécifiée, l'installateur du 
        paquet n'essaiera pas de construire le module noyau
        <computeroutput>vboxdrv</computeroutput> si aucun module correspond au 
        noyau actuel n'a été trouvé.</para>
      </sect3>

    </sect2>

    <sect2 id="startingvboxonlinux">
      <title>Démarrer VirtualBox sur Linux</title>

      <para>La manière la plus facile de démarrer un programme VirtualBox est de 
      lancer le programme de votre choix (<computeroutput>VirtualBox</computeroutput>, 
      <computeroutput>VBoxManage</computeroutput>,
      <computeroutput>VBoxSDL</computeroutput> ou <computeroutput>VBoxHeadless</computeroutput>),
      à partir d'un terminal. Ce sont des liens symboliques vers
      <computeroutput>VBox.sh</computeroutput> qui démarrent le programme requis
      pour vous.</para>

      <para>Les instructions détaillées suivantes ne devraient vous intéresser 
      que si vous souhaitez lancer VirtualBox sans l'installer au préalable. Vous
      devriez commencer par compiler le module noyau <computeroutput>vboxdrv</computeroutput>
      (voir ci-dessus) et l'insérer dans le noyau Linux. VirtualBox consiste en
      un service démon (<computeroutput>VBoxSVC</computeroutput>) et plusieurs 
      programmes d'application. Le démon est automatiquement démarré si 
      nécessaire. Toutes les applications VirtualBox vont communiquer avec le 
      démon par les sockets du domaine local Unix. Il peut y avoir plusieurs 
      instances de démon sous différents comptes utilisateur et les applications
      ne peuvent communiquer qu'avec le démon qui fonctionne sous le compte de 
      l'utilisateur en tant qu'application. Le socket du domaine local réside 
      dans un sous-répertoire de  votre répertoire système pour les fichiers 
      temporaires appelé <computeroutput>.vbox-&lt;nom_utilisateur&gt;-ipc</computeroutput>.
      En cas de problème de communication ou de démarrage du serveur, vous pouvez 
      essayer de supprimer ce répertoire.</para>

      <para>Toutes les applications de  VirtualBox
      (<computeroutput>VirtualBox</computeroutput>,
      <computeroutput>VBoxSDL</computeroutput>,
      <computeroutput>VBoxManage</computeroutput> et
      <computeroutput>VBoxHeadless</computeroutput>) exigent que le répertoire 
      VirtualBox soit dans le chemin de la bibliothèque&nbsp;:</para>

      <screen>LD_LIBRARY_PATH=. ./VBoxManage showvminfo "Windows XP"</screen>
    </sect2>
  </sect1>

  <sect1>
    <title id="install-solaris-host">Installation sur des hôtes Solaris</title>

    <para>Pour les diverses solutions de Solaris que nous supportons comme 
    systèmes d'exploitation hôtes, merci de vous référer au <xref
    linkend="hostossupport" />.</para>

    <para>Si vous avez une session de VirtualBox préalablement installée sur 
    votre hôte Solaris, merci de la désinstaller avant d'installer une nouvelle
    session. Reportez-vous au     <xref linkend="uninstallsolhost" /> pour les 
    instructions de désinstallation.</para>

    <sect2>
      <title>Effectuer l'installation</title>

      <para>VirtualBox est disponible comme paquet Solaris standard. Téléchargez
      le paquet VirtualBox SunOS qui comprend à la fois les versions 32 bits et
      64 bits de VirtualBox. <emphasis>Vous devez effectuer l'installation en tant 
      qu'administrateur et depuis la zone globale</emphasis> car l'installateur
      de VirtualBox charge des pilotes du noyau, ce qui ne peut pas se faire 
      depuis des zones non globales. Pour vérifier dans quelle zone vous vous 
      trouvez, exécutez la commande <computeroutput>zonename</computeroutput>. 
      Exécutez les commandes suivantes&nbsp;:</para>

      <screen>gunzip -cd VirtualBox-$VBOX_VERSION_STRING-SunOS.tar.gz | tar xvf -</screen>

      <para>À partir de VirtualBox 3.1, le paquet du noyau VirtualBox n'est plus
      séparé et a été intégré au paquet principal. Installez le paquet  VirtualBox
      en utilisant&nbsp;:</para>

      <screen>pkgadd -d VirtualBox-$VBOX_VERSION_STRING-SunOS.pkg</screen>

      <note>
        <para>Si vous utilisez les Zones Solaris, pour n'installer que dans la 
        zone actuelle et dans aucune autre zone, utilisez
        <computeroutput>pkgadd -G</computeroutput>. Pour plus 
        d'informations reportez-vous au manuel de
        <computeroutput>pkgadd</computeroutput>&nbsp;; voir aussi le 
        <xref linkend="solariszones" />.</para>
      </note>

      <para>L'installateur vous demandera alors d'entrer le paquet que vous 
      souhaitez installer. Choisissez <quote>1</quote> ou <quote>tout</quote>
      et poursuivez. Ensuite, l'installateur vous demandera si vous voulez 
      autoriser le script post installation à se lancer. Choisissez 
      <quote>y</quote> et poursuivez, vu qu'il est essentiel d'exécuter  ce 
      script qui installe le module noyau VirtualBox. Suite à cette confirmation, 
      l'installateur va installer VirtualBox et exécuter le script 
      d'initialisation postinstall.</para>

      <para>Une fois que le script postinstall a été exécuté, votre installation
      est à présent terminée. Vous pouvez maintenant effacer en toute sécurité 
      de votre système le paquet décompressé et les fichiers
      d'<computeroutput>auto-réponse</computeroutput>. VirtualBox devrait être 
      installé dans <computeroutput>/opt/VirtualBox</computeroutput>.</para>
    </sect2>

    <sect2>
      <title>Démarrer VirtualBox sur Solaris</title>

      <para>La façon la plus facile de démarrer un programme VirtualBox  est de
      lancer le programme de votre  choix (<computeroutput>VirtualBox</computeroutput>,
      <computeroutput>VBoxManage</computeroutput>, <computeroutput>VBoxSDL</computeroutput> 
      ou <computeroutput>VBoxHeadless</computeroutput>) à partir du terminal. 
      Ce sont des liens symboliques vers <computeroutput>VBox.sh</computeroutput> 
      qui démarre le programme requis pour vous.</para>

      <para>Vous pouvez alternativement invoquer les programmes requis à partir
      de <computeroutput>/opt/VirtualBox</computeroutput>. L'utilisation des 
      liens fournis est plus facile puisque vous n'êtes pas obligé de taper le 
      chemin complet.</para>

      <para>Vous pouvez configurer certains éléments du GUI Qt de
      <computeroutput>VirtualBox</computeroutput> tels que les polices et les 
      couleurs en exécutant <computeroutput>VBoxQtconfig</computeroutput> depuis
      le terminal.</para>
    </sect2>

    <sect2>
      <title id="uninstallsolhost">Désinstallation</title>

      <para>La désinstallation de VirtualBox sur Solaris exige les droits 
      administrateur. Pour effectuer la désinstallation, démarrez une session 
      de terminal administrateur et exécutez&nbsp;:</para>

      <screen>pkgrm SUNWvbox</screen>

      <para>Après confirmation, ceci supprimera VirtualBox de votre système.</para>

      <para>Si vous désinstallez la version 3.0 de VirtualBox ou inférieure, 
      vous devez supprimer le paquet d'interface noyau de VirtualBox, exécutez 
      donc&nbsp;:</para>

      <para><screen>pkgrm SUNWvboxkern</screen></para>
    </sect2>

    <sect2>
      <title>Installation sans efforts</title>

      <para>Pour effectuer une installation non interactive de VirtualBox, nous
      avons fourni un fichier de réponse nommé <computeroutput>autoresponse</computeroutput> 
      que l'installateur utilisera pour entrer les réponses aux questions plutôt
      que de vous les demander.</para>

      <para>Extrayez le paquet .tar.gz comme décrit dans l'installation normale. 
      Puis ouvrez une session de terminal administrateur et exécutez&nbsp;:</para>

      <screen>pkgadd -d VirtualBox-$VBOX_VERSION_STRING-SunOS-x86 -n -a autoresponse SUNWvbox</screen>

      <para>Pour effectuer une désinstallation non interactive, ouvrez une 
      session de terminal administrateur et exécutez&nbsp;:</para>

      <screen>pkgrm -n -a /opt/VirtualBox/autoresponse SUNWvbox</screen>
    </sect2>

    <sect2>
      <title id="solariszones">Configurer une zone pour faire fonctionner
      VirtualBox</title>

      <para>À partir de VirtualBox 1.6, il est possible de lancer VirtualBox 
      depuis des zones Solaris. Pour une introduction aux zones Solaris, merci 
      de vous référer à <ulink 
      url="http://www.sun.com/bigadmin/features/articles/solaris_zones.jsp">http://www.sun.com/bigadmin/features/articles/solaris_zones.jsp</ulink>.</para>

      <para>En supposant que VirtualBox a déjà été installé dans votre zone, 
      vous devez donner à la zone l'accès au noeud de périphérique de VirtualBox. 
      Ceci se fait en effectuant les étapes suivantes. Démarrez un terminal 
      administrateur et exécutez&nbsp;:</para>

      <screen>zonecfg -z vboxzone</screen>

      <para>À l'intérieur de l'invite <computeroutput>zonecfg</computeroutput>,
      ajoutez la ressource de <computeroutput>périphérique</computeroutput> et 
      les propriétés correspondantes à la zone. Voici comment vous pouvez faire 
      cela&nbsp;:</para>

      <screen>zonecfg:vboxzone&gt;add device
zonecfg:vboxzone:device&gt;set match=/dev/vboxdrv
zonecfg:vboxzone:device&gt;end
zonecfg:vboxzone&gt;verify
zonecfg:vboxzone&gt;exit</screen>

      <para>Si vous exécutez VirtualBox 2.2.0 ou supérieur sur des hôtes 
      OpenSolaris ou  Nevada, vous devriez ajouter aussi un périphérique pour 
      <computeroutput>/dev/vboxusbmon</computeroutput>,  comme montré ci-dessus. 
      Cela ne s'applique pas aux hôtes Solaris 10 du fait de l'absence du support 
      USB.</para>

      <para>Remplacez <quote>vboxzone</quote> par le nom de la zone 4ans
      la quelle vous souhaitez faire fonctionner VirtualBox. Ensuite, redémarrez
      la zone en utilisant <computeroutput>zoneadm</computeroutput> et vous
      devriez pouvoir lancer VirtualBox depuis l'intérieur de la zone
      configurée.</para>
    </sect2>
  </sect1>
</chapter>
